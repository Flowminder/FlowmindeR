% GRID3 Training Template
% Author: Michael Harper

% Load general packages
% specific packages are loaded as required to be clearer of their use
\usepackage{xcolor}
\usepackage{sectsty}
\usepackage{graphicx}
\usepackage{enumitem}
\usepackage{setspace}
\usepackage{flafter}
\usepackage{subfig}

 % Change fonts to Lato
\usepackage[default]{roboto}
\usepackage[T1]{fontenc}
\usepackage{merriweather}

% Prevent hyphenation
\tolerance=1
\emergencystretch=\maxdimen
\hyphenpenalty=10000
\hbadness=10000

% Defines the appearance of shaded boxes
\definecolor{shadecolor}{RGB}{248,248,248}

% Set page geometry
\usepackage{geometry}
\geometry{
 a4paper,
 left=25.4mm,
 top=25mm,
 right=25.4mm,
 bottom=25mm,
 headsep=5mm,
 headheight=60pt,
 }

% GRID3 Palette
% Define HTML colours for use
\definecolor{customGrey}{HTML}{E2DDD2}
\definecolor{customWhite}{RGB}{255, 255, 255}
\definecolor{customBlue}{HTML}{095798}
\definecolor{customPurple}{HTML}{6C3483}
\definecolor{customGrey}{HTML}{E2DDD2}
\definecolor{customGrey2}{RGB}{90, 90, 90}
\definecolor{customBrown}{HTML}{BDAC90}


\setstretch{1.25}              % Slightly expand line spacing
\setlength{\parindent}{0em}     % Remove paragraph indents
%\setcounter{secnumdepth}{0}     % Suppress numbering for each subsection

% Simplify document title
\makeatletter
\renewcommand*\maketitle{%
    \begingroup
    \fontsize{20}{20} % 72pt on 80pt leading
    \fontseries{b}% Bold
    \color{customBlue}
    \selectfont
    \setlength{\parindent}{0pc} % Make sure there is no indentation
    \@title
    \vspace{5mm}
\endgroup
    \begingroup
    \fontsize{14}{14} % 72pt on 80pt leading
    \color{customGrey2}
    \setlength{\parindent}{0pc} % Make sure there is no indentation
    \setlength{\parskip}{-2mm}
    \\
    \textit{\@author} \\

    \textit{\@date} \\
    \endgroup
}
\makeatother

% Change colours of document
\subsubsectionfont{\color{gray}}
\subsectionfont{\color{customBrown}}
\sectionfont{\color{customBlue}}

% Change bulletpoint style
\definecolor{orange}{RGB}{226,109,56}
\newcommand{\localtextbulletone}{\textcolor{orange}{\raisebox{.45ex}{\rule{.6ex}{.6ex}}}}
\renewcommand{\labelitemi}{\localtextbulletone}

% Update styles to match guide
\renewcommand{\emph}[1]{\textit{\textcolor{orange}{#1}}}

% create a command answer which provides a line for answers
\newcommand{\answer}{\hspace{1pt} \rule{40pt}{1pt} \hspace{1pt}}


% Customise header and footers
\usepackage{lastpage}
\usepackage{graphicx}
\usepackage{tikz}
\usepackage{titleps}
\usepackage{fancyhdr}

% Set the settings of the header using fancyhdr
\pagestyle{fancy}
\renewcommand{\headrulewidth}{0pt} % removes the line from the header
\fancyhf{}
\rhead{\includegraphics[width=3cm]{LOCALFILEPATH/logo.png}} % Add logo

% Create custom environments for exercises and tips
\usetikzlibrary{calc}
\usepackage[many]{tcolorbox}

% Create a basic custom block with no images (used for exercises)
\newtcolorbox{customBlock}{
  colback = customGrey,
  colframe = customGrey,
  before skip=5mm,
  after skip=5mm,
  boxsep=5pt,
  arc=4pt}

% Create a custom block containing images (used for questions and tips)
\newtcolorbox{customBlockImage}[2][]{
  enhanced,
  left skip={.15\linewidth},
  top=10pt,
  bottom=10pt,
  colback = customGrey,
  colframe = white,
  boxsep=5pt,
  arc=10pt,
  before skip=5mm,
  after skip=5mm,
  outer arc=10pt,
  leftupper=0.2cm,
overlay={
    \node[anchor=west]
      at ([xshift=-60pt] $ (interior.north west)!0.5!(interior.south west) $ )
       {{\setkeys{Gin}{width=15.2mm,keepaspectratio}\includegraphics{#2}}};},
#1}

% Define a box with line at top and bottom for quotes
\newtcolorbox{quoteBlock}{enhanced,
borderline horizontal={0.5mm}{0pt}{customBlue},
colback = customWhite,
colframe = customWhite,
halign=center,
fontupper=\color{customBlue} \bfseries \fontsize{11}{11} \itshape,
center,
width = 14cm,
boxsep=3mm
}

% Create the new environments for document
\newenvironment{tip}
  {\begin{customBlockImage}[colframe=customGrey]{resources/images/tip}}
  {\end{customBlockImage}}
\newenvironment{question}
  {\begin{customBlockImage}[colframe=customWhite, colback=customWhite]{resources/images/question}}
  {\end{customBlockImage}}
\newenvironment{challenge}
  {\begin{customBlock}}
  {\end{customBlock}}
\newenvironment{important}
  {\begin{quoteBlock}}
  {\end{quoteBlock}}
\newenvironment{rmdnote}
  {\begin{customBlockImage}{resources/images/note}}
  {\end{customBlockImage}}
\newenvironment{rmdcaution}
  {\begin{customBlockImage}{resources/images/caution}}
  {\end{customBlockImage}}
\newenvironment{rmdimportant}
  {\begin{customBlockImage}{resources/images/important}}
  {\end{customBlockImage}}
\newenvironment{rmdtip}
  {\begin{customBlockImage}{resources/images/tip}}
  {\end{customBlockImage}}
\newenvironment{rmdwarning}
  {\begin{customBlockImage}{resources/images/warning}}
  {\end{customBlockImage}}

\let\BeginKnitrBlock\begin \let\EndKnitrBlock\end


\makeatletter
\global\let\tikz@ensure@dollar@catcode=\relax
\makeatother
